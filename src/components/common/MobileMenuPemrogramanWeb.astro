---
// src/components/common/MobileMenuPemrogramanWeb.astro

// Define props
export interface Props {
  logoUrl?: string;
  title?: string;
  subtitle?: string;
  menuItems?: Array<{
    title: string;
    dropdownId: string;
    items: Array<{
      title: string;
      href: string;
    }>;
  }>;
}

// Default props
const {
  logoUrl = "https://upload.wikimedia.org/wikipedia/commons/2/21/Logo-stmik-bina-mulia-palu.png",
  title = "Pemrograman",
  subtitle = "Web",
  menuItems = [
    {
      title: "Pemrograman Web 1",
      dropdownId: "pw1",
      items: [
        {
          title: "Pertemuan 1: Pengenalan Website",
          href: "/pemrograman-web/satu-pertemuan-1"
        },
        {
          title: "Pertemuan 2: Heading, Paragraph, dan Style",
          href: "/pemrograman-web/satu-pertemuan-2"
        },
        {
          title: "Pertemuan 3: Link dan Anchor",
          href: "/pemrograman-web/satu-pertemuan-3"
        },
        {
          title: "Pertemuan 4: Style - CSS",
          href: "/pemrograman-web/satu-pertemuan-4"
        },
        {
          title: "Pertemuan 5: Gambar",
          href: "/pemrograman-web/satu-pertemuan-5"
        },
        {
          title: "Pertemuan 6: Tabel",
          href: "/pemrograman-web/satu-pertemuan-6"
        },
        {
          title: "Pertemuan 7: Form dan Input Elements",
          href: "/pemrograman-web/satu-pertemuan-7"
        },
        {
          title: "Pertemuan 8: UTS - Project HTML Dasar",
          href: "/pemrograman-web/satu-pertemuan-8"
        },
        {
          title: "Pertemuan 9: Pengenalan CSS & Selector Dasar",
          href: "/pemrograman-web/satu-pertemuan-9"
        },
        {
          title: "Pertemuan 10: Color, Background, dan Font",
          href: "/pemrograman-web/satu-pertemuan-10"
        },
        {
          title: "Pertemuan 11: Box Model (Margin, Border, Padding)",
          href: "/pemrograman-web/satu-pertemuan-11"
        },
        {
          title: "Pertemuan 12: Layout dengan Float",
          href: "/pemrograman-web/satu-pertemuan-12"
        },
        {
          title: "Pertemuan 13: Position (Static, Relative, Absolute, Fixed)",
          href: "/pemrograman-web/satu-pertemuan-13"
        },
        {
          title: "Pertemuan 14: Flexbox Dasar",
          href: "/pemrograman-web/satu-pertemuan-14"
        },
        {
          title: "Pertemuan 15: Responsive Design & Media Query",
          href: "/pemrograman-web/satu-pertemuan-15"
        },
        {
          title: "Pertemuan 16: UAS - Project Website Sederhana",
          href: "/pemrograman-web/satu-pertemuan-16"
        }
      ]
    }
  ]
} = Astro.props;
---

<div>
  <button
    type="button"
    data-menu-button
    class="lg:hidden p-2 rounded-md text-sky-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-sky-500 fixed top-4 left-4 z-50 bg-white shadow-lg border border-gray-200 transition-all duration-300"
    aria-label="Toggle menu">
    <div class="flex items-center">
      <svg
        class="h-6 w-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
      <span class="ml-2 font-medium">Menu</span>
    </div>
  </button>

  <!-- Mobile sidebar overlay -->
  <div id="mobile-sidebar" class="lg:hidden hidden fixed inset-0 z-50">
    <!-- Overlay -->
    <div
      class="fixed inset-0 bg-gray-500 opacity-25 transition-opacity duration-300"
      data-overlay>
    </div>

    <!-- Sidebar panel -->
    <div
      class="fixed inset-y-0 left-0 max-w-xs w-full bg-white shadow-xl transition-transform duration-300 transform -translate-x-full"
      data-sidebar-panel>
      <div class="h-full overflow-y-auto">
        <!-- Header -->
        <div class="px-6 py-4 border-b border-gray-200 bg-white">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <img src={logoUrl} alt="Logo STMIK Bina Mulia Palu" class="h-8 w-8" />
              <div>
                <h2 class="text-xl font-semibold text-gray-800">{title}</h2>
                <p class="text-gray-700">{subtitle}</p>
              </div>
            </div>
            <button
              type="button"
              class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 transition-colors"
              data-close-sidebar
              aria-label="Close menu">
              <svg
                class="h-6 w-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Navigation -->
        <nav class="mt-6 px-4" data-nav-container>
          <!-- Divider -->
          <div class="my-6 border-t border-gray-200"></div>

          <!-- Menu items dengan dropdown -->
          {menuItems.map((menuItem) => (
            <div class="mb-4" data-dropdown-container>
              <button 
                class="flex justify-between items-center w-full px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider hover:bg-gray-50 rounded transition-colors"
                data-dropdown-button={menuItem.dropdownId}
              >
                <span>{menuItem.title}</span>
                <svg data-dropdown-icon={menuItem.dropdownId} class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <div data-dropdown-content={menuItem.dropdownId} class="mt-2 space-y-1">
                {menuItem.items.map((item) => (
                  <a
                    href={item.href}
                    class="block px-4 py-2 text-sm text-gray-600 rounded hover:bg-gray-100 transition-colors">
                    {item.title}
                  </a>
                ))}
              </div>
            </div>
          ))}
        </nav>
      </div>
    </div>
  </div>
</div>

<style>
  /* Smooth transitions untuk mobile sidebar */
  #mobile-sidebar {
    transition: opacity 0.3s ease-in-out;
  }

  [data-sidebar-panel] {
    transition: transform 0.3s ease-in-out;
  }

  /* Hapus class untuk scroll behavior yang tidak diperlukan */
  
  /* Rotate animation untuk dropdown icons */
  .rotate-180 {
    transform: rotate(180deg);
  }

  /* Smooth transition untuk dropdown content */
  [data-dropdown-content] {
    transition: all 0.3s ease-in-out;
  }

  /* Smooth transition untuk dropdown icons */
  [data-dropdown-icon] {
    transition: transform 0.2s ease-in-out;
  }
</style>